============================================================================
	                  watchdog device driver
			    Installation Guide
		          for Linux Kernel 2.4.x/2.6.x
                    Copyright (C) 2011, Advantech Co., Ltd.
============================================================================

This README file describes the change history, test environment and source tree.
Contents

1. Introduction
2. Device support list
3. Test environment
4. Files
5. How to use example


1. Introduction
   There are 6 watchdog drivers: 
   627hf  :Winbond 83627HF chip	
   F75111R :F75111R chip
   SCH311X:SMSC SCH311X chip
   NCT6116D : NCT6116D chip
   Multi level: Multi-level watchdog chip
   NCT6776 : NCT6776 chip
   NCT5523 : NCT5523 chip

2. Device support list

   Information and reference:
   wdt627: 
      UNO-2050E, UNO-2050G, UNO-2052E, UNO-2053E, UNO-2053GL, UNO-2058E, UNO-2059E, 
      UNO-2059GL, UNO-1150, UNO-1150G, UNO-1170, UNO-1170A, UNO-2170 UNO-2176, UNO-2678, 
      UNO-2679, UNO-3072L, UNO-3074, UNO-3072A UNO-3074A, UNO-4678, UNO-4679, UNO-4672, 
      TPC-650, TPC-1250, TPC-1270H, TPC-662G, TPC-660E, ECU-4784

   F75111R: 
      UNO-2172, UNO-2182, UNO-2172A, UNO-3072LA, UNO-3082, UNO-3084
   SCH311x: 
      UNO-2173, UNO-2174A, UNO-2178A, UNO-2272G, TPC-1551, TPC-1550, TPC-651, TPC-1251, 
	  TPC-1770, TPC-671

   NCT6116D: 
      UNO-247, PPC-3100-RE9A, PPC-3120-RE9A

   Multilevel: 
      UNO-1172A

   NCT6776:
      UNO-2184G, UNO-2184G-D64E, UNO-3083G-D44E, UNO-3083G-D64E, UNO-3085G-D44E,
	  UNO-3085G-D64E, PPC-1150, PPC-8150, PPC-8170

   NCT5523:
      PPC-3100S
	  
   If your device is not in the above list,
   Please see the hardware manual to find which watchdog type the hardware support.

3. Test environment

   +--------------------------+-------------------------+
   |  Distribution            | kernel version          | 
   +--------------------------+-------------------------+
   |	Red Hat 9             |  2.4.20-8               |  
   |	RedHat Enterprise 4   |  2.6.9-34.EL            |
   |	Redhat Enterprise 5.4 |  2.6.18-164.el5         |
   |	Fedora Core 6         |  2.6.18-1.2798.fc6      | 
   |	Fedora Core 8         |  2.6.23.1-42.fc8        |
   |	Fedora Core 9         |  2.6.25-14.fc9          |       
   |	Fedora Core 10        |  2.6.27.5-117.fc10      |
   |	Fedora Core 11        |  2.6.29.4-167.fc11      |    
   |	Fedora Core 12        |  2.6.31.5-127.fc12      |
   |    Fedora Core 13        |  2.6.33.3-85.fc13       | 
   |	Fedora Core 19        |  3.9.5-301.fc19         |         
   |	Fedora Core 20        |  3.11.10-301.fc20       |         
   |	SUSE 10.1             |  2.6.16.13-4-default    |       
   |	SUSE 10.3             |  2.6.22.5-31-default    |      
   |	SUSE 11.2             |  2.6.31.5-0.1-desktop   |
   |	SUSE 11.3             |  2.6.34-12              |
   |	Mandriva 2010         |  2.6.31.5-desktop-1mnb  |
   |	Debian 5.0.4          |  2.6.26-2-686           |   
   |	Debian 6.0            |  2.6.32-5-686           |     
   |	Ubuntu 8.04           |  2.6.24-19-generic      | 
   |	ubuntu 9.04           |  2.6.28-11-generic      |
   |	Ubuntu 9.10           |  2.6.31-14-generic      |
   |	Ubuntu 10.04          |  2.6.32-21-generic      |
   |	Ubuntu 10.10          |  2.6.35-22-generic      |
   |	Ubuntu 14.04          |  3.13.0-12-generic      |
   +--------------------------+-------------------------+
  	
4. Files

4.1. Login as 'root' before executing the following instructions.

4.2. Uncompress the driver

   4.2.1 # tar zxvf advwdt_source_v1.25.tar.gz
   4.2.2 # cd advwdt_source_v1.25   
   4.2.3 Source tree   

         ./advwdt_source_v1.25
           |
           |- ./F75111R
           |    |- advwdt7511.c         driver Source Code
           |    |- Makefile             makefile for kernel
           |    |- README               readme for F75111R chip WDT driver
           |
           |- ./627hf
           |    |- advwdt627.c          driver Source Code
           |    |- Makefile             makefile for kernel
           |    |- Makefile-2.4.inc     makefile for kernel 2.6 series
           |    |- Makefile-2.6.inc     makefile for kernel 2.6 series
           |    |- README               readme for 83627 chip WDT driver
           |  		
           |- ./SCH311X
           |    |- advwd311x.c          driver Source Code
           |    |- Makefile             makefile for kernel
           |    |- Makefile-2.4.inc     makefile for kernel 2.6 series
           |    |- Makefile-2.6.inc     makefile for kernel 2.6 series
           |    |- README               readme for SCH311X chip WDT driver
           |
           |- ./multi_level
           |    |- advwdt_multi.c       driver Source Code 
           |    |- Makefile             makefile for kernel
           |    |- README               readme for multi_level WDT driver
           |
           |- ./NCT6116D
           |    |- advwdt6116d.c         driver Source Code 
           |    |- Makefile             makefile for kernel
           |    |- Makefile-2.4.inc     makefile for kernel 2.6 series
           |    |- Makefile-2.6.inc     makefile for kernel 2.6 series
           |    |- README               readme for NCT6776 WDT driver
           |
           |- ./NCT6776  
           |    |- advwdt6776.c         driver Source Code 
           |    |- Makefile             makefile for kernel
           |    |- Makefile-2.4.inc     makefile for kernel 2.6 series
           |    |- Makefile-2.6.inc     makefile for kernel 2.6 series
           |    |- README               readme for NCT6776 WDT driver
           |
           |- ./NCT5523
           |    |- advwdt5523.c         driver Source Code 
           |    |- Makefile             makefile for kernel
           |    |- Makefile-2.4.inc     makefile for kernel 2.6 series
           |    |- Makefile-2.6.inc     makefile for kernel 2.6 series
           |    |- README               readme for NCT5523 WDT driver
           |
           |- ./example
           |     |- testwdt.c           test utility for advwdt627, advwdt7511 and advwdt311x watchdog
           |     |- Makefile            makefile to build testwdt example
           |     
           |- ./multi_level_examples
           |     |- testwdt.c		    test utility for multi_level watchdog
           |     |- advwdt.h		    header file of test utility
           |     |- Makefile		    makefile to build testwdt example

   
5. How to use example

   5.1 Build the example
   
       Change directory to 'example' folder and then perform the command below.
       # make

   5.2 If you have already built WDT driver and installed it successfully, you 
       can perform the following commands to test driver and example. Please 
       refer to ../F75111R/README and ../627hf/README for driver installation 
       details.

       #./testwdt -d      --> disable watchdog timer
       #./testwdt -e      --> enable watchdog timer, the device will reboot
	   					      in 45 seconds by default.
       #./testwdt -s SEC  --> set timeout to watchdog timer and get back the 
                              seconds the driver adjusts
       					      The example of testwdt_mul has extra uses.
       #./testwdt_mul -l  --> watchdog level([1-7],default is 1)
       #./testwdt_mul -a  --> use application mode(default is system mode)
       #./testwdt_mul -o  --> enable digital output

  Note: 
	In some Linux distribution,CONFIG_WATCHDOG_NOWAYOUT is enabled in kernel by default.
	In this case, if user enable the watchdog, the watchdog can not be disabled again.
	If user want to disable the watchdog in those linux distribution, please add "nowayout=0" 
	parameter when insmod the watchdog module. For example:
	#insmod advwdt627.ko nowayout=0

	In some ubuntu releases, it seems that the ext4 file system is not stable, the executable file 
	testwdt is cut off to zero. so I recommend to use ext3 file system on these system.



